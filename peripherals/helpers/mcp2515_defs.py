# SPI commands: Table 12-1
CMD_RESET = 0xC0
CMD_READ = 0x03
CMD_READ_RX = 0x90
CMD_WRITE = 0x02
CMD_LOAD_TX = 0x40
CMD_RTS = 0x80
CMD_READ_STATUS = 0xA0
CMD_RX_STATUS = 0xB0
CMD_BIT_MODIFY = 0x05

# READ_RX Arguments: Figure 12-3
READ_RXB0SIDH = 0x00  # ID
READ_RXB0D0 = 0x02    # Data
READ_RXB1SIDH = 0x04
READ_RXB1D0 = 0x06

# LOAD_TX Arguments: Figure 12-5
LOAD_TXB0SIDH = 0x00
LOAD_TXB0D0 = 0x01
LOAD_TXB1SIDH = 0x02
LOAD_TXB1D0 = 0x03
LOAD_TXB2SIDH = 0x04
LOAD_TXB2D0 = 0x05

# RTS Arguments: Table 12-1 (RTS)
RTS_TXB0 = 0x01
RTS_TXB1 = 0x02
RTS_TXB2 = 0x04

# READ_STATUS Response: Figure 12-8
STATUS_RX0IF = 0x01
STATUS_RX1IF = 0x02
STATUS_TX0REQ = 0x04
STATUS_TX0IF = 0x08
STATUS_TX1REQ = 0x10
STATUS_TX1IF = 0x20
STATUS_TX2REQ = 0x40
STATUS_TX2IF = 0x80

# Control Registers: Table 11-2
CTRL_REG_BFPCTRL = 0x0C    # RX pins disabled by default
CTRL_REG_TXRTSCTRL = 0x0D  # TX pins input by default
CTRL_REG_CANSTAT = 0x0E
CTRL_REG_CANCTRL = 0x0F
CTRL_REG_TEC = 0x1C
CTRL_REG_REC = 0x1D
CTRL_REG_CNF3 = 0x28
CTRL_REG_CNF2 = 0x29
CTRL_REG_CNF1 = 0x2A
CTRL_REG_CANINTE = 0x2B
CTRL_REG_CANINTF = 0x2C
CTRL_REG_EFLG = 0x2D
CTRL_REG_TXB0CTRL = 0x30
CTRL_REG_TXB1CTRL = 0x40
CTRL_REG_TXB2CTRL = 0x50
CTRL_REG_RXB0CTRL = 0x60
CTRL_REG_RXB1CTRL = 0x70

# TX Ctrl bits: Register 3-1
TX_CTRL_BIT_ABTF = (1 << 6)
TX_CTRL_BIT_MLOA = (1 << 5)
TX_CTRL_BIT_TXERR = (1 << 4)

# Filter/Mask Registers: Table 11-1
REG_RXF0SIDH = 0x00
REG_RXF1SIDH = 0x04
REG_RXF2SIDH = 0x08
REG_RXF3SIDH = 0x10
REG_RXF4SIDH = 0x14
REG_RXF5SIDH = 0x18
REG_RXM0SIDH = 0x20
REG_RXM1SIDH = 0x24

# CANCTRL: Register 10-1
CANCTRL_OPMODE_MASK = 0xE0
CANCTRL_OPMODE_NORMAL = 0x00
CANCTRL_OPMODE_SLEEP = 0x20
CANCTRL_OPMODE_LOOPBACK = 0x40
CANCTRL_OPMODE_LISTEN = 0x60
CANCTRL_OPMODE_CONFIG = 0x80

CANCTRL_CLKOUT_MASK = 0x07
CANCTRL_CLKOUT_CLKPRE_1 = 0x04  # CLKEN is automatically enabled
CANCTRL_CLKOUT_CLKPRE_2 = 0x05
CANCTRL_CLKOUT_CLKPRE_4 = 0x06
CANCTRL_CLKOUT_CLKPRE_8 = 0x07

# CNF3: Register 5-3
CNF3_PHSEG2_MASK = 0x07

# CNF2: Register 5-2
CNF2_BTLMODE_MASK = 0x80
CNF2_BTLMODE_CNF3 = 0x80

CNF2_SAMPLE_MASK = 0x40
CNF2_SAMPLE_3X = 0x40

CNF2_PHSEG1_MASK = 0x38
CNF2_PRSEG_MASK = 0x07

# CNF1: Register 5-1
CNF1_BRP_MASK = 0x3F

# CANINTE/INTF: Register 7-1/2
CANINT_MSG_ERROR = 0x80
CANINT_WAKEUP = 0x40
CANINT_EFLAG = 0x20
CANINT_TX2IE = 0x10
CANINT_TX1IE = 0x08
CANINT_TX0IE = 0x04
CANINT_RX1IE = 0x02
CANINT_RX0IE = 0x01

# EFLG: Register 6-3
EFLG_RX1_OVERFLOW = 0x80
EFLG_RX0_OVERFLOW = 0x40
EFLG_TX_BUS_OFF = 0x20
EFLG_TX_EP_FLAG = 0x10
EFLG_RX_EP_FLAG = 0x08
EFLG_TX_WARNING = 0x04
EFLG_RX_WARNING = 0x02
EFLG_ERROR_WARNING = 0x01

# TXBnDLC: Register 3-7
TXBNDLC_RTR_SHIFT = 6
TXBNDLC_RTR_FRAME = 0x40
TXBNDLC_DLC_MASK = 0x0F

# RXB0CTRL: Register 4-1
RXB0CTRL_BUKT = 0x4

MAX_WRITE_BUFFER_LEN = 10
STANDARD_ID_LEN = 11
EXTENDED_ID_LEN = 18

CAN_BRP_125KBPS = 3
CAN_BRP_250KBPS = 1
CAN_BRP_500KBPS = 0

NUM_MASK_REGISTERS_STANDARD = 2
NUM_MASK_REGISTERS_EXTENDED = 4

# BFPCTRL: Register 4-3
BFPCTRL_B1BFS = 0x20
BFPCTRL_B2BFS = 0x10
BFPCTRL_B1BFE = 0x08
BFPCTRL_B2BFE = 0x04
BFPCTRL_B1BFM = 0x02
BFPCTRL_B2BFM = 0x01
